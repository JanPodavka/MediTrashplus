#:import App kivymd.app.MDApp

WindowManager:
    LoginWindow:
    MainWindow
    RegistrationWindow


<RegistFormular@BoxLayout>:
    BoxLayout:
        orientation: "horizontal"
        pos_hint: {"center_x": .5, "center_y": 0.5}
        size_hint: 1, 0.75
        spacing: 40
        MDLabel:
            text: ctx.image
            size_hint: .2, 1
            halign: "right"
            font_size: 32
            pos_hint: {'center_x': 0.3, 'center_y': 1}
        MDTextField:
            mode: "rectangle"
            size_hint: .7, 1
            pos_hint: {'center_x': 0.2, 'center_y': 1}


<LoginWindow>:
    name:'login'
    MDIconButton:
        icon: "Obrazky/exit-to-app.png"
        on_press: quit()

    MDCard:
        pos_hint: {"center_x": .5, "center_y": .5}
        size_hint: .8, .8
        elevation: 10
        padding: 10
        MDBoxLayout:
            padding: 10
            spacing: "25dp"
            orientation: 'vertical'
            size: root.width, root.height

            BoxLayout:
                pos_hint: {"center_x": .5, "center_y": .5}
                size_hint_y: 3
                Image:
                    source: 'obrazky/cover.png'
                    allow_stretch: True
                    pos_hint: {"center_x": .5, "center_y": .3}

            BoxLayout:
                orientation: 'horizontal'
                size_hint_x: 0.6
                pos_hint: {"center_x": .5, "center_y": 1}
                spacing:20

                MDRoundFlatButton:
                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                    size_hint: 0.5, 0.5
                    text_color: 0, 0, 0, 1
                    text_size: None, None
                    text: 'Přihlášení'
                    on_press:
                        app.root.current = "main"
                        root.manager.transition.direction = "left"
                MDRoundFlatButton:
                    pos_hint: {'center_x': 0.5,'center_y': .5}
                    text_color: 0, 0, 0, 1
                    size_hint: 0.5, 0.5
                    text_size: None, None
                    text: 'Registrace'
                    on_press:
                        app.root.current = "registrace"
                        root.manager.transition.direction = "left"

            BoxLayout:
                orientation: "vertical"
                size_hint_y: 1
                pos_hint: {'center_x': 0.5,'center_y': 0.9}
                MDTextField:
                    id: name
                    hint_text: "Přihlašovací jméno"
                    text_color: 0, 0, 0, 0.75
                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                    size_hint_x: 0.6

                MDTextField:
                    id:password
                    password: True
                    hint_text: "Heslo"
                    text_color: 0, 0, 0, 0.75
                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                    size_hint_x: 0.6

            BoxLayout:
                orientation: "vertical"
                size_hint_y: 0.5
                pos_hint: {'center_x': 0.5,'center_y': 0.5}
                MDFillRoundFlatButton:
                    pos_hint: {'center_x': 0.5,'center_y': 0.5}
                    text_color: 0, 0, 0, 1
                    size_hint: 0.25, 0.25
                    text_size: None, None
                    text: 'Přihlásit'
                    on_press:
                        root.login_user(name.text, password.text)
                        app.root.current = "main"
                        root.manager.transition.direction = "left"
<MainWindow>:
    name:"main"

    BoxLayout:
        orientation: 'vertical'
        MDBoxLayout:
            pos_hint: {"center_x": .5, "center_y": .5}
            size_hint: 1, .1
            spacing: 5
            md_bg_color: .0, .0, .0, .15
            Button:
                text: "Profil"
            Button:
                text: "Vložit odpad"
            Button:
                text: "Historie"
            Button:
                text: "Statistika"
            Image:
                source: 'obrazky/logo.png'

        MDBoxLayout:
            orientation: "vertical"

            MDRaisedButton:
                text: "Odhlásit"
                font_size: 32
                on_release : print("zpatky")
                on_press:
                    app.root.current = "login"
                    root.manager.transition.direction = "left"

<RegistrationWindow>:
    name:"registrace"

    BoxLayout:
        orientation: "vertical"
        size_hint: 1, 1
        BoxLayout:
            pos_hint: {"center_x": .5, "center_y": .3}
            size_hint_y: .4
            Image:
                source: 'obrazky/cover.png'
                allow_stretch: True
                pos_hint: {"center_x": .5, "center_y": .3}
        BoxLayout:
            size_hint: .5, .2
        BoxLayout:
            orientation: "vertical"
            pos_hint: {"center_x": .45, "center_y": .03}
            size_hint: 0.5, 0.6
            RegistFormular:
                image: "Jmeno"
            RegistFormular:
                image: "Jmeno"
            RegistFormular:
                image: "Jmeno"
            RegistFormular:
                image: "Jmeno"
            RegistFormular:
                image: "Jmeno"
            RegistFormular:
                image: "Jmeno"
        BoxLayout:
            pos_hint: {"center_x": .5, "center_y": .8}
            size_hint: .2, .2
            MDRoundFlatButton:
                pos_hint: {'center_x': .5,'center_y': .8}
                text_color: 0, 0, 0, 1
                size_hint: .3, .3
                text_size: None, None
                text: 'Registrace'
                on_press:
                    app.root.current = "registrace"
                    root.manager.transition.direction = "left"

    MDBoxLayout:
        orientation: "vertical"

        MDRaisedButton:
            text: "Zpět"
            font_size: 32
            on_press:
                app.root.current = "login"
                root.manager.transition.direction = "right"
